# This file was created for <%= node.name %>
# by Chef
# Manual changes will be lost
<% if @cfg['custom_content'] %>
<%= @cfg['custom_content'] %>
<% else %>
  <% [*@cfg['modules']].each do |mod| %>
$ModLoad <%= mod %>
  <% end %>

  <% [*@cfg['watches']].each do |watch| %>
$InputFileName <%= watch['name'] %>
$InputFileTag <%= watch['tag'] || "#{File.basename(watch['name'])}:" %>
$InputFileStateFile <%= watch['state_file'] || "state-#{watch['name'].sub(/^\//, '').gsub(%r{[\./]}, '-')}" %>
$InputFileSeverity <%= watch['severity'] || 'notice' %>
$InputRunFileMonitor
  <% end %>

  <% [*@cfg['directives']].each do |k,v| %>
<%= k %> <%= v %>
  <% end %>
<% end %>
